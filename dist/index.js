"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e);var s=Object.getOwnPropertyDescriptor(t,e);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,r,s)}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),__exportStar=this&&this.__exportStar||function(n,t){for(var e in n)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&__createBinding(t,n,e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ForgeCanvas=void 0,exports.registerFonts=registerFonts;const forgescript_1=require("@tryforge/forgescript"),canvas_1=require("@napi-rs/canvas"),node_fs_1=require("node:fs"),node_path_1=require("node:path"),package_json_1=require("../package.json");async function registerFonts(n,t){for(const e of n){if(!(0,node_fs_1.existsSync)(e.src))throw forgescript_1.Logger.error(`Invalid font source. (${e.src})`);if((0,node_fs_1.statSync)(e.src).isFile()){let r=(0,node_path_1.basename)(e.src);if(!["ttf","otf","woff","woff2"].find(s=>r.endsWith(`.${s}`)))return;r=e.name??r.split(".").slice(0,-1).join("."),t&&canvas_1.GlobalFonts.has(r)&&forgescript_1.Logger.warn(`Font with name '${r}' already exists.`),canvas_1.GlobalFonts.registerFromPath(e.src,r),t&&forgescript_1.Logger.info(`Successfully registered '${r}'.`)}else return registerFonts((0,node_fs_1.readdirSync)(e.src).map(r=>({src:(0,node_path_1.join)(e.src,r)})),t)}}class ForgeCanvas extends forgescript_1.ForgeExtension{name="forge.canvas";description="A forgescript extension that allows you to create and edit images with ease.";version=package_json_1.version;init(){this.load(__dirname+"/functions")}}exports.ForgeCanvas=ForgeCanvas,__exportStar(require("./classes"),exports),__exportStar(require("./typings"),exports);
