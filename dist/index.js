"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(s,r,e,t){t===void 0&&(t=e);var i=Object.getOwnPropertyDescriptor(r,e);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(s,t,i)}:function(s,r,e,t){t===void 0&&(t=e),s[t]=r[e]}),__exportStar=this&&this.__exportStar||function(s,r){for(var e in s)e!=="default"&&!Object.prototype.hasOwnProperty.call(r,e)&&__createBinding(r,s,e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ForgeCanvas=exports.registerFonts=void 0;const canvas_1=require("@napi-rs/canvas"),forgescript_1=require("@tryforge/forgescript"),node_fs_1=require("node:fs"),node_path_1=require("node:path"),classes_1=require("./classes"),package_json_1=require("../package.json"),registerFonts=async s=>s.forEach(r=>{if(!(0,node_fs_1.existsSync)(r.src))throw classes_1.Logger.log("ERROR",`Invalid font source. (${r.src})`);if((0,node_fs_1.statSync)(r.src).isFile()){let e=(0,node_path_1.basename)(r.src);if(!["ttf","otf","woff","woff2"].find(t=>e.endsWith(`.${t}`)))return;e=r.name??e.split(".").slice(0,-1).join("."),canvas_1.GlobalFonts.has(e)&&classes_1.Logger.log("WARN",`Font with name '${e}' already exists.`),canvas_1.GlobalFonts.registerFromPath(r.src,e),classes_1.Logger.log("INFO",`Successfully registered '${e}'.`)}else return(0,exports.registerFonts)((0,node_fs_1.readdirSync)(r.src).map(e=>({src:(0,node_path_1.join)(r.src,e)})))});exports.registerFonts=registerFonts;class ForgeCanvas extends forgescript_1.ForgeExtension{name="forge.canvas";description="A forgescript extension that allows you to create and edit images with ease.";version=package_json_1.version;init(){this.load(__dirname+"/functions")}}exports.ForgeCanvas=ForgeCanvas,__exportStar(require("./classes"),exports),__exportStar(require("./typings"),exports);
