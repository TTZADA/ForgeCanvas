"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(t,s,e,r){r===void 0&&(r=e);var o=Object.getOwnPropertyDescriptor(s,e);(!o||("get"in o?!s.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return s[e]}}),Object.defineProperty(t,r,o)}:function(t,s,e,r){r===void 0&&(r=e),t[r]=s[e]}),__exportStar=this&&this.__exportStar||function(t,s){for(var e in t)e!=="default"&&!Object.prototype.hasOwnProperty.call(s,e)&&__createBinding(s,t,e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ForgeCanvas=void 0,exports.registerFonts=registerFonts;const node_fs_1=require("node:fs"),node_path_1=require("node:path"),canvas_1=require("@napi-rs/canvas"),forgescript_1=require("@tryforge/forgescript"),package_json_1=require("../package.json"),classes_1=require("./classes");async function registerFonts(t,s){for(const e of t){if(!(0,node_fs_1.existsSync)(e.src))throw classes_1.Logger.log("ERROR",`Invalid font source. (${e.src})`);if((0,node_fs_1.statSync)(e.src).isFile()){let r=(0,node_path_1.basename)(e.src);if(!["ttf","otf","woff","woff2"].find(o=>r.endsWith(`.${o}`)))return;r=e.name??r.split(".").slice(0,-1).join("."),s&&canvas_1.GlobalFonts.has(r)&&classes_1.Logger.log("WARN",`Font with name '${r}' already exists.`),canvas_1.GlobalFonts.registerFromPath(e.src,r),s&&classes_1.Logger.log("INFO",`Successfully registered '${r}'.`)}else return registerFonts((0,node_fs_1.readdirSync)(e.src).map(r=>({src:(0,node_path_1.join)(e.src,r)})),s)}}class ForgeCanvas extends forgescript_1.ForgeExtension{name="forge.canvas";description="A forgescript extension that allows you to create and edit images with ease.";version=package_json_1.version;init(){this.load(__dirname+"/functions")}}exports.ForgeCanvas=ForgeCanvas,__exportStar(require("./classes"),exports),__exportStar(require("./typings"),exports);
