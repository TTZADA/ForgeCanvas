"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(s,t,e,r){r===void 0&&(r=e);var n=Object.getOwnPropertyDescriptor(t,e);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(s,r,n)}:function(s,t,e,r){r===void 0&&(r=e),s[r]=t[e]}),__exportStar=this&&this.__exportStar||function(s,t){for(var e in s)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&__createBinding(t,s,e)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ForgeCanvas=void 0,exports.registerFonts=registerFonts;const node_fs_1=require("node:fs"),node_path_1=require("node:path"),canvas_1=require("@napi-rs/canvas"),forgescript_1=require("@tryforge/forgescript"),package_json_1=require("../package.json"),classes_1=require("./classes");async function registerFonts(s,t){for(const e of s){if(!(0,node_fs_1.existsSync)(e.src))throw classes_1.Logger.log("ERROR",`Invalid font source. (${e.src})`);if((0,node_fs_1.statSync)(e.src).isFile()){let r=(0,node_path_1.basename)(e.src);if(!["ttf","otf","woff","woff2"].find(n=>r.endsWith(`.${n}`)))return;r=e.name??r.split(".").slice(0,-1).join("."),t&&canvas_1.GlobalFonts.has(r)&&classes_1.Logger.log("WARN",`Font with name '${r}' already exists.`),canvas_1.GlobalFonts.registerFromPath(e.src,r),t&&classes_1.Logger.log("INFO",`Successfully registered '${r}'.`)}else return registerFonts((0,node_fs_1.readdirSync)(e.src).map(r=>({src:(0,node_path_1.join)(e.src,r)})),t)}}class ForgeCanvas extends forgescript_1.ForgeExtension{name="forge.canvas";description="A forgescript extension that allows you to create and edit images with ease.";version=package_json_1.version;init(){this.load(__dirname+"/functions")}}exports.ForgeCanvas=ForgeCanvas,__exportStar(require("./classes"),exports),__exportStar(require("./typings"),exports);
